<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="utf-8">
    <meta name    = "viewport" content = "width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
    <title>makeSound</title>
    <link href="main.css" rel="stylesheet">
</head>
<body>
    <div class="allKeys">
        <div class="key" data-id="1">嘣</div>
        <div class="key" data-id="2">拍手</div>
        <div class="key" data-id="3">嚓</div>
        <div class="key" data-id="4">敲</div>
        <div class="key" data-id="5">open镲</div>
        <div class="key" data-id="6">汀</div>
    </div>

    <audio src="boom.wav" data-id="1"></audio>
    <audio src="clap.wav" data-id="2"> </audio>
    <audio data-id="3" src="hihat.wav"></audio>
    <audio data-id="4" src="kick.wav"></audio>
    <audio data-id="5" src="openhat.wav"></audio>
    <audio data-id="6" src="ride.wav"></audio>
   <!-- <audio data-id="7" src="snare.wav"></audio>
    <audio data-id="8" src="tink.wav"></audio>
    <audio data-id="9" src="tom.wav"></audio>-->
    <script>
        const allButton =Array.from (document.querySelectorAll('.key'));
        window.addEventListener('click',playSound);
        allButton.forEach(key=>key.addEventListener('transitionend',remove));
        
        function playSound(event){  
            var tare=event.target;
            const key = document.querySelector(`div[data-id="${tare.dataset['id']}"]`);
            const audio = document.querySelector(`audio[data-id="${tare.dataset['id']}"]`);

            if(!audio)return;
            key.classList.add('playing');
            audio.currentTime = 0;
            audio.play();
        }
        function remove(event){
            if(event.propertyName!=='transform')return;
            event.target.classList.remove('playing');
        }

    </script>
</body>
</html>